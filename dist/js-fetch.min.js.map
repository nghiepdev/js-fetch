{"version":3,"sources":["../src/js-fetch.js"],"names":[],"mappings":"oFAIe,SAAS,CAAT,CAAc,CAAd,CAAuB,CACpC,MAAO,IAAI,QAAJ,CAAY,SAAC,CAAD,CAAU,CAAV,CAAqB,CACd,WAApB,QAAO,SAD2B,CA4BpC,EAAO,GAAI,MAAJ,CAAU,wCAAV,CAAP,CA5BoC,CAE/B,KAAK,QAAL,CAAc,CAAd,CAF+B,CAgBlC,iBAAM,CAAE,MAAO,OAAO,gBAAhB,CAAN,CAA0C,SAAC,CAAD,CAAc,CAClD,OAAO,CAAP,CADkD,CAEpD,EAAS,IAAT,CAAe,OAAO,CAAP,CAAf,CAFoD,CAIpD,EAAS,GAAI,MAAJ,CAAU,yBAA2B,CAArC,CAAT,CAEH,CAND,CAMG,SAAC,CAAD,CAAM,CAAN,CAAiB,CAClB,GAAO,EAAO,CAAP,CADW,CAElB,EAAQ,CAAR,CACD,CATD,CAhBkC,YAGlC,GAAM,GAAK,SAAS,aAAT,CAAuB,QAAvB,CAAX,CACA,EAAG,KAAH,GAJkC,CAKlC,EAAG,GAAH,CAAS,CALyB,CAMlC,EAAG,OAAH,CAAa,EAAG,MAAH,CAAY,WAAO,CAC1B,GAAoB,OAAb,KAAI,IADe,GAE5B,EAAG,MAAH,EAF4B,CAG5B,EAAO,CAAP,CAH4B,EAK9B,EAAQ,OAAO,CAAP,CAAR,CACD,CAZiC,CAalC,SAAS,IAAT,CAAc,WAAd,CAA0B,CAA1B,CAbkC,CAclC,KAAK,IAAL,CAAU,CAAV,CAdkC,GA8BvC,CA9BM,CA+BR,C,CApCD,4BAEM,OAFN,C","file":"js-fetch.min.js","sourcesContent":["import { retry } from 'async';\n\nconst urls = [];\n\nexport default function(url, waitVar) {\n  return new Promise((resolve, reject) => {\n    if (typeof document !== 'undefined') {\n      if (!urls.includes(url)) {\n        const el = document.createElement('script');\n        el.async = true;\n        el.src = url;\n        el.onerror = el.onload = err => {\n          if (err && err.type === 'error') {\n            el.remove();\n            reject(err);\n          }\n          resolve(window[waitVar]);\n        };\n        document.body.appendChild(el);\n        urls.push(url);\n      } else {\n        retry({ times: Number.MAX_SAFE_INTEGER }, (callback) => {\n          if (window[waitVar]) {\n            callback(null, window[waitVar]);\n          } else {\n            callback(new Error('Cannot found variable ' + waitVar));\n          }\n        }, (err, result) => {\n          err && reject(err);\n          resolve(result);\n        });\n      }\n    } else {\n      reject(new Error('This package is not called during SSR.'));\n    }\n  });\n}\n"]}